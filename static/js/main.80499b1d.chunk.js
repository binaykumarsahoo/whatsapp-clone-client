(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{126:function(e,t,a){},127:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),s=(a(93),a(8)),i=(a(94),a(24)),o=a(29);function u(e,t){var a="whatsapp-clone-"+e,r=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),c=Object(s.a)(r,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){localStorage.setItem(a,JSON.stringify(l))}),[a,l]),[l,i]}var m=r.a.createContext();function f(){return Object(n.useContext)(m)}function d(e){var t=e.children,a=u("contacts",[]),n=Object(s.a)(a,2),c=n[0],l=n[1];return r.a.createElement(m.Provider,{value:{contacts:c,createContact:function(e,t){l((function(a){return[].concat(Object(o.a)(a),[{id:e,name:t}])}))}}},t)}var v=a(70),E=a.n(v),b=r.a.createContext();function p(e){var t=e.id,a=e.children,c=Object(n.useState)(),l=Object(s.a)(c,2),i=l[0],o=l[1];return Object(n.useEffect)((function(){var e=E()("https://whatsapp-clone-server-binay.herokuapp.com",{query:{id:t}});return o(e),function(){return e.close()}}),[t]),r.a.createElement(b.Provider,{value:i},a)}var h=r.a.createContext();function g(){return Object(n.useContext)(h)}function N(e){var t=e.id,a=e.children,c=u("conversations",[]),l=Object(s.a)(c,2),m=l[0],d=l[1],v=Object(n.useState)(0),E=Object(s.a)(v,2),p=E[0],g=E[1],N=f().contacts,O=Object(n.useContext)(b);var C=Object(n.useCallback)((function(e){var t=e.recipients,a=e.text,n=e.sender;d((function(e){var r=!1,c={sender:n,text:a},l=e.map((function(e){return a=e.recipients,n=t,a.length===n.length&&(a.sort(),n.sort(),a.every((function(e,t){return e===n[t]})))?(r=!0,Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(o.a)(e.messages),[c])})):e;var a,n}));return r?l:[].concat(Object(o.a)(e),[{recipients:t,messages:[c]}])}))}),[d]);Object(n.useEffect)((function(){if(null!=O)return O.on("receive-message",C),function(){return O.off("receive-message")}}),[O,C]),console.log(m);var j=m.map((function(e,a){console.log(e);var n=e.recipients.map((function(e){var t=N.find((function(t){return t.id===e})),a=t&&t.name||e;return{id:e,name:a}})),r=e.messages.map((function(e){var a=N.find((function(t){return t.id===e.sender})),n=a&&a.name||e.sender,r=t===e.sender;return Object(i.a)(Object(i.a)({},e),{},{senderName:n,fromMe:r})})),c=a===p;return Object(i.a)(Object(i.a)({},e),{},{messages:r,recipients:n,selected:c})})),_={conversations:j,selectedConversation:j[p],sendMessage:function(e,a){O.emit("send-message",{recipients:e,text:a}),C({recipients:e,text:a,sender:t})},selectConversationIndex:g,createConversation:function(e){if(1===e.length&&("single",m.filter((function(e){return"single"===e.type})).find((function(t){return t.recipients[0]===e[0]}))))return;d((function(t){return[].concat(Object(o.a)(t),[{recipients:e,messages:[]}])}))}};return r.a.createElement(h.Provider,{value:_},a)}var O=a(158),C=a(156),j=(a(126),a(75)),_=a.n(j),y=a(159),x=a(76),S=a.n(x),k=a(77),M=a.n(k),w=a(78),I=a.n(w);a(127);function R(e){var t=e.messageRef,a=e.message,n=e.received;return r.a.createElement("div",{className:"chatMessage ".concat(n?"message-in":"message-out"),ref:t},r.a.createElement("div",{className:"text"},a))}function L(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]),i=g(),o=i.sendMessage,u=i.selectedConversation;return r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat__backgroundImage"}),r.a.createElement("header",{className:"chat__header"},r.a.createElement("div",{className:"chat__headerLeft"},r.a.createElement("div",{className:"chat__headerLeftAvatar"},r.a.createElement(O.a,null)),r.a.createElement("div",{className:"chat__info"},r.a.createElement("span",null,u.recipients.map((function(e){return e.name})).join(", ")),r.a.createElement("p",null,"last seen today at 5.44 PM"))),r.a.createElement("div",{className:"chat__headerRight"},r.a.createElement(C.a,null,r.a.createElement(y.a,null)),r.a.createElement(C.a,null,r.a.createElement(_.a,null)))),r.a.createElement("div",{className:"chat__body"},u.messages.map((function(e,t){var a=u.messages.length-1===t;return r.a.createElement(R,{messageRef:a?l:null,message:e.text,received:!e.fromMe,key:t})}))),r.a.createElement("footer",{className:"chat__footer"},r.a.createElement("div",{className:"chat__footerLeft"},r.a.createElement(C.a,null,r.a.createElement(S.a,{style:{fontSize:"26px"}})),r.a.createElement(C.a,null,r.a.createElement(M.a,null))),r.a.createElement("div",{className:"chat__footerMiddle"},r.a.createElement("textarea",{type:"text",placeholder:"Type a message",onChange:function(e){return c(e.target.value)},value:a})),r.a.createElement("div",{className:"chat__footerRight"},r.a.createElement(C.a,null,r.a.createElement(I.a,{onClick:function(){o(u.recipients.map((function(e){return e.id})),a),c("")}})))))}a(133),a(134);var P=a(81),B=a.n(P),J=a(82),q=a.n(J),H=a(83),A=a.n(H);a(135);function D(e){var t=e.profilePic,a=e.name,n=e.message,c=e.onClick,l=e.active;return r.a.createElement("div",{className:"sidebarChat ".concat(l?"active":""),onClick:c},r.a.createElement("div",{className:"sidebarChat__avatar"},r.a.createElement(O.a,{src:t})),r.a.createElement("div",{className:"sidebarChat__info"},r.a.createElement("h2",null,a),r.a.createElement("p",null,n)))}var F=a(154),G=a(155),T=a(157);function W(e){var t=e.closeModal,a=Object(n.useRef)(),c=Object(n.useRef)(),l=f().createContact;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a.Header,{closeButton:!0},"Create Contact"),r.a.createElement(F.a.Body,null,r.a.createElement(G.a,{onSubmit:function(e){e.preventDefault(),l(a.current.value,c.current.value),t()}},r.a.createElement(G.a.Group,null,r.a.createElement(G.a.Label,null,"Mobile No"),r.a.createElement(G.a.Control,{type:"number",ref:a,required:!0})),r.a.createElement(G.a.Group,null,r.a.createElement(G.a.Label,null,"Name"),r.a.createElement(G.a.Control,{type:"text",ref:c,required:!0})),r.a.createElement(T.a,{type:"submit",className:"mt-2"},"Create"))))}var z=a(80),V=a.n(z);a(137);function Y(e){var t=e.setContactsOpen,a=f().contacts,n=g().createConversation;return r.a.createElement("div",{className:"contacts"},r.a.createElement("header",null,r.a.createElement("div",{className:"headerWrapper"},r.a.createElement(C.a,{className:"iconButton",onClick:function(){t(!1)}},r.a.createElement(V.a,{style:{color:"#ffffff"}})),r.a.createElement("div",{className:"newChatText"},"New chat"))),a.map((function(e){return r.a.createElement(D,{key:e.id,name:e.name,message:"Hey there! I am using WhatsApp.",onClick:function(){return a=e.id,n([a]),void t(!1);var a}})})))}var K=function(){var e=g(),t=e.conversations,a=e.selectConversationIndex;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(D,{key:t,name:e.recipients.map((function(e){return e.name})).join(", "),onClick:function(){return a(t)},active:e.selected})})))};function Q(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(s.a)(l,2),o=i[0],u=i[1];function m(){c(!1)}return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar__header"},r.a.createElement(O.a,null),r.a.createElement("div",{className:"sidebar__headerRight"},r.a.createElement(C.a,{title:"Status"},r.a.createElement(B.a,null)),r.a.createElement(C.a,{title:"New chat",onClick:function(){return u(!0)}},r.a.createElement(q.a,null)),r.a.createElement(C.a,{title:"New Contact",onClick:function(){return c(!0)}},r.a.createElement(A.a,null)))),o&&r.a.createElement(Y,{setContactsOpen:u}),r.a.createElement(F.a,{show:a,onHide:m},r.a.createElement(W,{closeModal:m})),r.a.createElement("div",{className:"sidebar__search"},r.a.createElement("div",{className:"sidebar__searchContainer"},r.a.createElement(y.a,null),r.a.createElement("input",{type:"text",placeholder:"Search or start new chat"}))),r.a.createElement(K,null))}function U(e){e.id;var t=g().selectedConversation;return r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"dashboard__body"},r.a.createElement(Q,null),t&&r.a.createElement(L,null)))}a(138);function X(e){var t=e.onIdSubmit,a=Object(n.useRef)();return r.a.createElement("div",{className:"login"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(a.current.value)}},r.a.createElement("label",{htmlFor:"mobileNo"},"Enter Your Mobile No"),r.a.createElement("input",{type:"number",name:"mpbileNo",ref:a}),r.a.createElement("button",{type:"submit"},"Submit")))}var Z=function(){var e=u("id"),t=Object(s.a)(e,2),a=t[0],n=t[1],c=r.a.createElement(p,{id:a},r.a.createElement(d,null,r.a.createElement(N,{id:a},r.a.createElement(U,{id:a}))));return r.a.createElement("div",{className:"app"},a?c:r.a.createElement(X,{onIdSubmit:n}))};a(139);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root"))},88:function(e,t,a){e.exports=a(140)},93:function(e,t,a){},94:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.80499b1d.chunk.js.map